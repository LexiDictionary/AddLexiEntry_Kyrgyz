<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LexiKyrgyz Admin</title>
  <link rel="stylesheet" href="admin-style.css" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <div id="auth-screen">
    <div class="auth-box">
      <h2>LexiKyrgyz Admin</h2>
      <p>Enter your email to receive a secure login link.</p>
      <input type="email" id="email" placeholder="your.email@example.com" autocomplete="email" />
      <button id="login-btn">Send Login Link</button>
      <p id="auth-msg"></p>
    </div>
  </div>

  <div id="app" style="display:none;">
    <h1>Add Kyrgyz Lemma</h1>
    <p class="subtitle">Kyrgyz → English dictionary entry</p>

    <form id="form">
      <div class="grid">
        <div class="field">
          <label>Canonical (Kyrgyz) <span class="req">*</span></label>
          <input id="canon" required placeholder="e.g. кол" />
        </div>
        <div class="field">
          <label>Pronunciation</label>
          <input id="pron" placeholder="/kol/" />
        </div>
      </div>

      <div class="field">
        <label>CEFR Level</label>
        <select id="cefr">
          <option value="">—</option>
          <option>A1</option><option>A2</option><option>B1</option>
          <option>B2</option><option>C1</option><option>C2</option>
        </select>
      </div>

      <div class="field">
        <label>Inflected Forms (comma-separated)</label>
        <input id="forms" placeholder="колду, колдор" />
      </div>

      <hr class="divider">

      <div id="senses">
        <div class="sense" data-id="1">
          <h2>Sense 1</h2>

          <div class="grid">
            <div class="field">
              <label>Part of Speech <span class="req">*</span></label>
              <select class="pos" required>
                <option value="">—</option>
                <option>noun</option>
                <option>verb</option>
                <option>adjective</option>
                <option>adverb</option>
                <option>numeral</option>
                <option>particle</option>
                <option>preposition</option>
                <option>pronoun</option>
                <option>conjunction</option>
                <option>interjection</option>
                <option>expression</option>
              </select>
            </div>
            <div class="field">
              <label>Topic</label>
              <input class="topic" placeholder="body, nature, etc." />
            </div>
          </div>

          <div class="field">
            <label>English Translation <span class="req">*</span></label>
            <textarea class="trans" required rows="2" placeholder="e.g. hand"></textarea>
          </div>

          <div class="field">
            <label>Grammar (JSON or plain text)</label>
            <textarea class="grammar-text" rows="4" placeholder='{"nominative": "кол", "accusative": "колду", "plural": "колдор"}'></textarea>
          </div>

          <div class="field">
            <label>Examples <span class="req">*</span></label>
            <div class="list ex-list">
              <div class="pair">
                <input placeholder="Kyrgyz sentence" class="ex-kg" required />
                <input placeholder="English translation" class="ex-en" required />
                <button type="button" class="del">×</button>
              </div>
            </div>
            <button type="button" class="add add-ex">+ Add Another Example</button>
          </div>

          <div class="field">
            <label>Related Words</label>
            <div class="list rel-list">
              <div class="pair">
                <input placeholder="Kyrgyz phrase" class="rel-kg" />
                <input placeholder="English translation" class="rel-en" />
                <button type="button" class="del">×</button>
              </div>
            </div>
            <button type="button" class="add add-rel">+ Add Related Word</button>
          </div>

          <button type="button" class="del-sense">Remove Sense</button>
        </div>
      </div>

      <button type="button" id="add-sense" class="add-sense-btn">+ Add Another Sense (max 6)</button>

      <div class="actions">
        <button type="submit">Submit Lemma</button>
        <button type="reset" onclick="location.reload()">Clear Form</button>
        <button type="button" id="signout-btn">Sign Out</button>
      </div>
    </form>

    <div id="msg"></div>
  </div>

  <script>
    const SUPABASE_URL = 'https://jvizodlmiiisubatqykg.supabase.co';
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp2aXpvZGxtaWlpc3ViYXRxeWtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE2NjYxNTYsImV4cCI6MjA3NzI0MjE1Nn0.YD9tMUyQVq7v5gkWq-f_sQfYfD2raq_o7FeOmLjeN7I';
  </script>
  <script src="admin-script.js"></script>
</body>
</html>
